{"version":3,"sources":["webpack:///./src/views/thirdPartService/WyIm.vue?53c1","webpack:///./src/views/thirdPartService/WyIm.vue?b95b","webpack:///src/views/thirdPartService/WyIm.vue","webpack:///./src/views/thirdPartService/WyIm.vue?3c2c","webpack:///./src/views/thirdPartService/WyIm.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WyIm_vue_vue_type_style_index_0_id_7d31d2f4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WyIm_vue_vue_type_style_index_0_id_7d31d2f4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","attrs","type","id","value","click","WyImvue_type_script_lang_js_","name","mounted","document","getElementById","addEventListener","sendMsg","data","connectSDK","appkey","account","token","window","nim","NIM","getInstance","appKey","onconnect","alert","sendText","scene","to","text","done","msg","ondisconnect","obj","console","log","onerror","error","onroamingmsgs","onRoamingMsgs","onofflinemsgs","onOfflineMsgs","onmsg","onMsg","onfriends","onFriends","onsyncfriendaction","onSyncFriendAction","onsessions","onSessions","onupdatesession","onUpdateSession","pushMsg","msgs","onCustomMsg","onTeamNotificationMsg","sendMsgDone","idClient","friends","mergeFriends","cutFriends","invalid","refreshFriendsUI","ps","onAddFriend","friend","onDeleteFriend","onUpdateFriend","cutFriendsByAccounts","sessions","mergeSessions","updateSessionsUI","session","methods","thirdPartService_WyImvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-c1bc16b0.d9720b7e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WyIm.vue?vue&type=style&index=0&id=7d31d2f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WyIm.vue?vue&type=style&index=0&id=7d31d2f4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"云信 Web SDK Online Test\")]),_c('div',[_c('p',[_c('span',[_vm._v(\"APPKEY:\")]),_c('input',{attrs:{\"type\":\"text\",\"id\":\"appkey\",\"value\":\"45c6af3c98409b18a84451215d0bdd6e\"}})]),_c('p',[_c('span',[_vm._v(\"ACCOUNT:\")]),_c('input',{attrs:{\"type\":\"text\",\"id\":\"account\",\"value\":\"greatcs4\"}})]),_c('p',[_c('span',[_vm._v(\"TOKEN:\")]),_c('input',{attrs:{\"type\":\"text\",\"id\":\"token\",\"value\":\"e10adc3949ba59abbe56e057f20f883e\"}})]),_c('p',[_c('button',{attrs:{\"id\":\"connect-sdk\"}},[_vm._v(\"连接SDK\")])])]),_c('div',[_c('button',{attrs:{\"id\":\"sendText\",\"click\":\"\"}},[_vm._v(\"发送消息\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <h1>云信 Web SDK Online Test</h1>\r\n        <div>\r\n        <p>\r\n            <span>APPKEY:</span>\r\n        <input type=\"text\" id=\"appkey\" value=\"45c6af3c98409b18a84451215d0bdd6e\">\r\n        </p>\r\n        <p>\r\n            <span>ACCOUNT:</span>\r\n            <input type=\"text\" id=\"account\" value=\"greatcs4\">\r\n        </p>\r\n        <p>\r\n            <span>TOKEN:</span>\r\n            <input type=\"text\" id=\"token\" value=\"e10adc3949ba59abbe56e057f20f883e\">\r\n        </p>\r\n        <p>\r\n            <button id=\"connect-sdk\">连接SDK</button>\r\n        </p>\r\n        </div>\r\n        <div>\r\n            <button id='sendText' click=\"\">发送消息</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'WyIm',\r\n\r\n    mounted () {\r\n        document.getElementById('sendText').addEventListener('click', function () {\r\n            sendMsg()\r\n        }, false)\r\n\r\n        var data = {}\r\n\r\n        function connectSDK () {\r\n            var appkey = document.getElementById('appkey').value\r\n            var account = document.getElementById('account').value\r\n            var token = document.getElementById('token').value\r\n            window.nim = NIM.getInstance({\r\n                appKey: appkey,\r\n                account: account,\r\n                token: token,\r\n                onconnect: function () {\r\n                    alert('SDK 连接成功')\r\n                    // 连接成功后才能发消息\r\n                    window.nim.sendText({\r\n                        scene: 'p2p',\r\n                        to: 'account',\r\n                        text: 'hello',\r\n                        done: function sendMsgDone (msg) {\r\n                        }\r\n                    })\r\n                },\r\n                ondisconnect: function (obj) {\r\n                    console.log('SDK 连接断开', obj)\r\n                },\r\n                onerror: function (error) {\r\n                    console.log('SDK 连接失败', error)\r\n                },\r\n\r\n                onroamingmsgs: onRoamingMsgs,\r\n                onofflinemsgs: onOfflineMsgs,\r\n                onmsg: onMsg,\r\n\r\n                // 好友列表\r\n                onfriends: onFriends,\r\n                onsyncfriendaction: onSyncFriendAction,\r\n\r\n                // 最近会话\r\n                onsessions: onSessions,\r\n                onupdatesession: onUpdateSession\r\n            })\r\n        }\r\n\r\n        function onRoamingMsgs (obj) {\r\n            console.log('收到漫游消息', obj)\r\n            pushMsg(obj.msgs)\r\n        }\r\n        function onOfflineMsgs (obj) {\r\n            console.log('收到离线消息', obj)\r\n            pushMsg(obj.msgs)\r\n        }\r\n        function onMsg (msg) {\r\n            console.log('收到消息', msg.scene, msg.type, msg)\r\n            pushMsg(msg)\r\n            switch (msg.type) {\r\n            case 'custom':\r\n                onCustomMsg(msg)\r\n                break\r\n            case 'notification':\r\n                // 处理群通知消息\r\n                onTeamNotificationMsg(msg)\r\n                break\r\n            // 其它case\r\n            default:\r\n                break\r\n            }\r\n        }\r\n\r\n        // 发送消息\r\n        function sendMsg () {\r\n            var msg = window.nim.sendText({\r\n                scene: 'p2p',\r\n                to: 'account',\r\n                text: 'hello',\r\n                done: sendMsgDone\r\n            })\r\n            console.log('正在发送p2p text消息, id=' + msg.idClient)\r\n            pushMsg(msg)\r\n            function sendMsgDone (error, msg) {\r\n                console.log(error)\r\n                console.log(msg)\r\n                console.log('发送' + msg.scene + ' ' + msg.type + '消息' + (!error ? '成功' : '失败') + ', id=' + msg.idClient)\r\n                pushMsg(msg)\r\n            }\r\n        }\r\n\r\n        function pushMsg (msgs) {\r\n            console.log('pushMsg', msgs)\r\n            // if (!Array.isArray(msgs)) { msgs = [msgs] }\r\n            // var sessionId = msg[0].scene + '-' + msgs[0].account\r\n            // data.msgs = data.msgs || {}\r\n            // data.msgs[sessionId] = nim.mergeMsgs(data.msgs[sessionId], msgs)\r\n        }\r\n\r\n        function onCustomMsg (msg) {\r\n            console.log('onCustomMsg', msg)\r\n            // 处理自定义消息\r\n        }\r\n\r\n        function onTeamNotificationMsg (msg) {\r\n            console.log('onTeamNotificationMsg', msg)\r\n            // 处理群通知消息\r\n            // var type = msg.attach.type,\r\n            //     from = msg.from,\r\n            //     teamId = msg.to,\r\n            //     timetag = msg.time,\r\n            //     team = msg.attach.team,\r\n            //     account = msg.attach.account,\r\n            //     accounts = msg.attach.accounts,\r\n            //     members = msg.attach.members\r\n            // switch (type) {\r\n            // case 'updateTeam':\r\n            //     team.updateTime = timetag\r\n            //     onTeams(team)\r\n            //     break\r\n            // case 'addTeamMembers':\r\n            //     onAddTeamMembers(team, accounts, members)\r\n            //     break\r\n            // case 'removeTeamMembers':\r\n            //     onRemoveTeamMembers(team, teamId, accounts)\r\n            //     break\r\n            // case 'acceptTeamInvite':\r\n            //     onAddTeamMembers(team, [from], members)\r\n            //     break\r\n            // case 'passTeamApply':\r\n            //     onAddTeamMembers(team, [account], members)\r\n            //     break\r\n            // case 'addTeamManagers':\r\n            //     updateTeamManagers(teamId, members)\r\n            //     break\r\n            // case 'removeTeamManagers':\r\n            //     updateTeamManagers(teamId, members)\r\n            //     break\r\n            // case 'leaveTeam':\r\n            //     onRemoveTeamMembers(team, teamId, [from])\r\n            //     break\r\n            // case 'dismissTeam':\r\n            //     dismissTeam(teamId)\r\n            //     break\r\n            // case 'transferTeam':\r\n            //     transferTeam(team, members)\r\n            //     break\r\n            // }\r\n        }\r\n\r\n        // 接收好友列表\r\n        function onFriends (friends) {\r\n            console.log('收到好友列表', friends)\r\n            data.friends = window.nim.mergeFriends(data.friends, friends)\r\n            data.friends = window.nim.cutFriends(data.friends, friends.invalid)\r\n            refreshFriendsUI()\r\n        }\r\n        function onSyncFriendAction (obj) {\r\n            console.log(obj)\r\n            switch (obj.type) {\r\n            case 'addFriend':\r\n                console.log('你在其它端直接加了一个好友' + obj.account + ', 附言' + obj.ps)\r\n                onAddFriend(obj.friend)\r\n                break\r\n            case 'applyFriend':\r\n                console.log('你在其它端申请加了一个好友' + obj.account + ', 附言' + obj.ps)\r\n                break\r\n            case 'passFriendApply':\r\n                console.log('你在其它端通过了一个好友申请' + obj.account + ', 附言' + obj.ps)\r\n                onAddFriend(obj.friend)\r\n                break\r\n            case 'rejectFriendApply':\r\n                console.log('你在其它端拒绝了一个好友申请' + obj.account + ', 附言' + obj.ps)\r\n                break\r\n            case 'deleteFriend':\r\n                console.log('你在其它端删了一个好友' + obj.account)\r\n                onDeleteFriend(obj.account)\r\n                break\r\n            case 'updateFriend':\r\n                console.log('你在其它端更新了一个好友', obj.friend)\r\n                onUpdateFriend(obj.friend)\r\n                break\r\n            }\r\n        }\r\n        function onAddFriend (friend) {\r\n            data.friends = window.nim.mergeFriends(data.friends, friend)\r\n            refreshFriendsUI()\r\n        }\r\n        function onDeleteFriend (account) {\r\n            data.friends = window.nim.cutFriendsByAccounts(data.friends, account)\r\n            refreshFriendsUI()\r\n        }\r\n        function onUpdateFriend (friend) {\r\n            data.friends = window.nim.mergeFriends(data.friends, friend)\r\n            refreshFriendsUI()\r\n        }\r\n        function refreshFriendsUI () {\r\n            // 刷新界面\r\n        }\r\n\r\n        function onSessions (sessions) {\r\n            console.log('收到会话列表', sessions)\r\n            data.sessions = window.nim.mergeSessions(data.sessions, sessions)\r\n            updateSessionsUI()\r\n        }\r\n        function onUpdateSession (session) {\r\n            console.log('会话更新了', session)\r\n            data.sessions = window.nim.mergeSessions(data.sessions, session)\r\n            updateSessionsUI()\r\n        }\r\n        function updateSessionsUI () {\r\n            // 刷新界面\r\n        }\r\n\r\n        document.getElementById('connect-sdk').addEventListener('click', function () {\r\n            connectSDK()\r\n        })\r\n    },\r\n\r\n    methods: {\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WyIm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WyIm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WyIm.vue?vue&type=template&id=7d31d2f4&scoped=true&\"\nimport script from \"./WyIm.vue?vue&type=script&lang=js&\"\nexport * from \"./WyIm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WyIm.vue?vue&type=style&index=0&id=7d31d2f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d31d2f4\",\n  null\n  \n)\n\ncomponent.options.__file = \"WyIm.vue\"\nexport default component.exports"],"sourceRoot":""}