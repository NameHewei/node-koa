{"version":3,"sources":["webpack:///./src/views/thirdPartService/AMap.vue?1f42","webpack:///./src/views/thirdPartService/AMap.vue?a104","webpack:///src/views/thirdPartService/AMap.vue","webpack:///./src/views/thirdPartService/AMap.vue?9618","webpack:///./src/views/thirdPartService/AMap.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AMap_vue_vue_type_style_index_0_id_4aaa2457_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AMap_vue_vue_type_style_index_0_id_4aaa2457_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","id","directives","name","rawName","value","expression","staticRenderFns","AMapvue_type_script_lang_js_","data","type","canEdit","path","mounted","getArea","methods","length","initialPolygon","setAMap","_this","map","AMap","Map","zoom","center","polygon","Polygon","isOutline","borderWeight","strokeColor","strokeWeight","strokeOpacity","fillOpacity","fillColor","zIndex","setMap","setFitView","document","getElementById","onclick","remove","polyEditor","PolyEditor","open","close","console","log","on","e","target","getPath","v","lng","lat","handleSavePath","_this2","mouseTool","MouseTool","overlays","draw","push","obj","$message","success","error","thirdPartService_AMapvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-1a9b5d5c.64ef0282.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AMap.vue?vue&type=style&index=0&id=4aaa2457&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AMap.vue?vue&type=style&index=0&id=4aaa2457&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"draw-area\"},[_c('div',{staticClass:\"info\"},[_vm._v(\"\\n            操作说明：用鼠标左键点击地图，选择区域，点击鼠标右键结束选择\\n        \")]),_c('button',{staticClass:\"remove-area\",attrs:{\"id\":\"removeArea\"}},[_vm._v(\"清除\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canEdit),expression:\"canEdit\"}],staticClass:\"edit-area\",attrs:{\"id\":\"editArea\"}},[_vm._v(\"编辑\")]),_c('button',{staticClass:\"save-area\",attrs:{\"id\":\"saveArea\"}},[_vm._v(\"保存\")]),_c('div',{staticClass:\"a-map-container\",attrs:{\"id\":\"aMapContainer\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"draw-area\">\r\n            <div class='info'>\r\n                操作说明：用鼠标左键点击地图，选择区域，点击鼠标右键结束选择\r\n            </div>\r\n            <button\r\n                class=\"remove-area\"\r\n                id=\"removeArea\">清除</button>\r\n            <button\r\n                v-show=\"canEdit\"\r\n                class=\"edit-area\"\r\n                id=\"editArea\"\r\n            >编辑</button>\r\n            <button\r\n                class=\"save-area\"\r\n                id=\"saveArea\">保存</button>\r\n            <div\r\n                id=\"aMapContainer\"\r\n                class=\"a-map-container\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        return {\r\n            type: 'CREATE',\r\n            canEdit: false,\r\n            path: [\r\n                [116.403322, 39.920255],\r\n                [116.410703, 39.897555],\r\n                [116.402292, 39.892353]\r\n            ]\r\n        }\r\n    },\r\n\r\n    mounted () {\r\n        this.getArea()\r\n    },\r\n\r\n    methods: {\r\n        getArea () {\r\n            if (this.path.length) {\r\n                this.initialPolygon()\r\n                this.type = 'EDIT'\r\n                this.canEdit = true\r\n            } else {\r\n                this.canEdit = false\r\n                this.setAMap()\r\n            }\r\n        },\r\n\r\n        initialPolygon () {\r\n            const map = new AMap.Map('aMapContainer', {\r\n                    zoom: 12,\r\n                    center: [113.246949, 23.122186]\r\n                }),\r\n\r\n                { path } = this,\r\n\r\n                polygon = new AMap.Polygon({\r\n                    path,\r\n                    isOutline: true,\r\n                    borderWeight: 3,\r\n                    strokeColor: '#10c4f9',\r\n                    strokeWeight: 6,\r\n                    strokeOpacity: 0.2,\r\n                    fillOpacity: 0.4,\r\n                    // 线样式还支持 'dashed'\r\n                    fillColor: '#54cdfd',\r\n                    zIndex: 50\r\n                })\r\n\r\n            polygon.setMap(map)\r\n            // 缩放地图到合适的视野级别\r\n            map.setFitView([polygon])\r\n\r\n            document.getElementById('removeArea').onclick = () => {\r\n                map.remove(polygon)\r\n\r\n                this.path = []\r\n                this.canEdit = false\r\n\r\n                this.setAMap()\r\n            }\r\n\r\n            // 编辑地图\r\n            const polyEditor = new AMap.PolyEditor(map, polygon)\r\n\r\n            document.getElementById('editArea').onclick = () => {\r\n                polyEditor.open()\r\n            }\r\n\r\n            document.getElementById('saveArea').onclick = () => {\r\n                polyEditor.close()\r\n                console.log(2)\r\n            }\r\n\r\n            polyEditor.on('end', (e) => {\r\n                this.path = e.target.getPath().map(v => ([v.lng, v.lat]))\r\n                this.handleSavePath()\r\n            })\r\n        },\r\n\r\n        setAMap () {\r\n            const map = new AMap.Map('aMapContainer', {\r\n                    center: [113.246949, 23.122186],\r\n                    zoom: 12\r\n                }),\r\n                mouseTool = new AMap.MouseTool(map)\r\n\r\n            // 监听draw事件可获取画好的覆盖物\r\n            let overlays = []\r\n\r\n            function draw () {\r\n                mouseTool.polygon({\r\n                    fillColor: '#54cdfd',\r\n                    strokeColor: '#10c4f9'\r\n                })\r\n            }\r\n\r\n            mouseTool.on('draw', (e) => {\r\n                overlays.push(e.obj)\r\n\r\n                // 禁止用户画第二个覆盖物\r\n                mouseTool.close()\r\n\r\n                this.path = overlays[0].getPath().map(v => ([v.lng, v.lat]))\r\n            })\r\n\r\n            draw()\r\n\r\n            document.getElementById('removeArea').onclick = () => {\r\n                map.remove(overlays)\r\n                overlays = []\r\n                draw()\r\n                this.path = []\r\n            }\r\n\r\n            document.getElementById('saveArea').onclick = () => {\r\n                console.log(1)\r\n                this.handleSavePath()\r\n            }\r\n        },\r\n\r\n        handleSavePath () {\r\n            const { path } = this\r\n\r\n            if (path.length > 1) {\r\n                this.getArea()\r\n                this.$message.success('保存成功')\r\n            } else {\r\n                this.$message.error('设置范围')\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped type=\"text/scss\" lang=\"scss\">\r\n    .draw-area{\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        border: 2px solid rgb(230, 230, 230);\r\n\r\n        .a-map-container{\r\n            width: 100%;\r\n            height: 800PX;\r\n            color: rgb(248, 50, 50)\r\n\r\n        }\r\n\r\n        .info{\r\n            position: absolute;\r\n            padding: 6px 15px;\r\n            right: 0;\r\n            top: 0;\r\n            font-size: 14px;\r\n            z-index: 2;\r\n            color: #fff;\r\n            background-color: rgba(2, 166, 231, 0.8);\r\n        }\r\n\r\n        .remove-area {\r\n            left: 30px;\r\n            top: 30px;\r\n            width: 80px;\r\n            height: 80px;\r\n            border-radius:50%;\r\n            background-color: rgb(13, 112, 224);\r\n        }\r\n\r\n        .save-area {\r\n            right: 30px;\r\n            bottom: 30px;\r\n            width: 120px;\r\n            height: 40px;\r\n            border-radius: 4px;\r\n            background-color: rgb(13, 112, 224);\r\n        }\r\n        .edit-area{\r\n            right: 170px;\r\n            bottom: 30px;\r\n            width: 120px;\r\n            height: 40px;\r\n            border-radius: 4px;\r\n            background-color: rgb(13, 112, 224);\r\n        }\r\n\r\n        .remove-area, .save-area, .edit-area{\r\n            position: absolute;\r\n            padding: 0;\r\n            border: 0;\r\n            box-shadow: 2px 2px 2px 0px rgb(104, 104, 104);\r\n            font-size: 16px;\r\n            z-index: 2;\r\n            color: #fff;\r\n            letter-spacing: 2px;\r\n            text-indent: 4px;\r\n            cursor: pointer;\r\n            outline: none;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AMap.vue?vue&type=template&id=4aaa2457&scoped=true&\"\nimport script from \"./AMap.vue?vue&type=script&lang=js&\"\nexport * from \"./AMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AMap.vue?vue&type=style&index=0&id=4aaa2457&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4aaa2457\",\n  null\n  \n)\n\ncomponent.options.__file = \"AMap.vue\"\nexport default component.exports"],"sourceRoot":""}